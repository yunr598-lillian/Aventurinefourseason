<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ æ˜¯æˆ‘çš„ç¬¬äº”ä¸ªå­£èŠ‚</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

        :root {
          --bg-color: #FFEBE5;
          --primary-color: #FFC9F0;
          --secondary-color: #C7EE65;
          --text-color: #a23107;
          --cat-ear-color: #FFC9F0;
        }

        body {
          font-family: 'DotGothic16', sans-serif;
          background-color: var(--bg-color);
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
          transition: background-color 0.5s ease;
          padding: 20px;
        }

        .game-container {
          width: 100%;
          max-width: 550px;
          height: 550px;
          background-color: rgba(255, 255, 255, 0.7);
          border: 4px solid var(--primary-color);
          border-radius: 20px;
          box-shadow: 0 0 0 8px var(--secondary-color), 0 0 20px rgba(0,0,0,0.1);
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          padding: 25px;
          box-sizing: border-box;
          position: relative;
          overflow: hidden;
          transition: border-color 0.5s ease, box-shadow 0.5s ease;
        }

        .game-container::before, .game-container::after {
          content: '(ã…‡ã……ã…‡)';
          font-size: 24px;
          color: var(--cat-ear-color);
          position: absolute;
          top: -15px;
          transition: color 0.5s ease;
        }

        .game-container::before {
          left: 30px;
          transform: rotate(-15deg);
        }

        .game-container::after {
          right: 30px;
          transform: rotate(15deg);
        }

        .response-area {
          position: absolute;
          top: 25px;
          left: 25px;
          right: 25px;
          display: none; /* Initially hidden */
          align-items: center;
          background: rgba(255, 255, 255, 0.8);
          border-radius: 12px;
          padding: 10px;
          border: 2px dashed var(--primary-color);
          transition: border-color 0.5s ease;
        }

        .char-avatar {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          border: 3px solid var(--secondary-color);
          object-fit: cover;
          margin-right: 15px;
          flex-shrink: 0;
          transition: border-color 0.5s ease;
          cursor: pointer;
        }

        .char-dialogue {
          font-size: 14px;
          color: var(--text-color);
          flex-grow: 1;
          transition: color 0.5s ease;
        }
        
        .activity-display {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          text-align: center;
          height: 100%;
          padding-top: 50px;
        }

        .activity-text {
          font-size: 24px;
          color: var(--text-color);
          margin-bottom: 20px;
          animation: text-flow 2s infinite ease-in-out;
          transition: color 0.5s ease;
        }
        
        @keyframes text-flow {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
        
        .cat-decoration {
          font-size: 18px;
          color: var(--primary-color);
          margin-bottom: 30px;
          transition: color 0.5s ease;
        }

        .action-button {
          font-family: 'DotGothic16', sans-serif;
          background-color: var(--primary-color);
          color: var(--text-color);
          border: 3px solid var(--secondary-color);
          border-radius: 15px;
          padding: 15px 30px;
          font-size: 18px;
          cursor: pointer;
          transition: transform 0.2s, background-color 0.5s, border-color 0.5s, color 0.5s;
          box-shadow: 0 4px 0 0 var(--text-color);
          position: relative;
        }
        
        .action-button:active {
          transform: translateY(4px);
          box-shadow: none;
        }

        .season-selector {
          display: flex;
          justify-content: space-around;
          padding: 10px 0 0 0;
          border-top: 2px dashed var(--secondary-color);
          transition: border-color 0.5s ease;
        }

        .season-btn {
          font-family: 'DotGothic16', sans-serif;
          background: none;
          border: none;
          font-size: 22px;
          cursor: pointer;
          opacity: 0.7;
          transition: opacity 0.3s, transform 0.3s;
        }

        .season-btn.active {
          opacity: 1;
          transform: scale(1.2);
        }
        
        .season-btn:hover {
          opacity: 1;
        }
        
        /* è‡ªå®šä¹‰å¤´åƒä¸Šä¼ æ ·å¼ */
        .avatar-upload-container {
          position: absolute;
          top: 15px;
          right: 15px;
          z-index: 10;
        }
        
        .upload-btn {
          background-color: var(--primary-color);
          color: var(--text-color);
          border: 2px solid var(--secondary-color);
          border-radius: 10px;
          padding: 5px 10px;
          font-size: 12px;
          cursor: pointer;
          font-family: 'DotGothic16', sans-serif;
          transition: all 0.3s;
        }
        
        .upload-btn:hover {
          background-color: var(--secondary-color);
        }
        
        #avatar-upload {
          display: none;
        }
        
        /* å¤´åƒä¸Šä¼ æç¤º */
        .avatar-tooltip {
          position: absolute;
          top: 35px;
          right: 0;
          background-color: rgba(255, 255, 255, 0.95);
          color: var(--text-color);
          padding: 10px;
          border-radius: 8px;
          font-size: 12px;
          width: 140px;
          border: 1px solid var(--primary-color);
          box-shadow: 0 3px 10px rgba(0,0,0,0.1);
          opacity: 0;
          transition: opacity 0.3s;
          pointer-events: none;
        }
        
        .char-avatar:hover + .avatar-tooltip {
          opacity: 1;
        }
        
        /* å¤´åƒä¸Šä¼ æ¨¡æ€æ¡† */
        .avatar-modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 100;
          justify-content: center;
          align-items: center;
        }
        
        .modal-content {
          background-color: var(--bg-color);
          padding: 25px;
          border-radius: 20px;
          border: 4px solid var(--primary-color);
          box-shadow: 0 0 0 8px var(--secondary-color), 0 0 30px rgba(0,0,0,0.2);
          max-width: 400px;
          width: 90%;
          text-align: center;
        }
        
        .modal-title {
          font-size: 22px;
          color: var(--text-color);
          margin-bottom: 20px;
        }
        
        .avatar-preview {
          width: 150px;
          height: 150px;
          border-radius: 50%;
          border: 4px solid var(--secondary-color);
          object-fit: cover;
          margin: 0 auto 20px;
          background-color: white;
        }
        
        .modal-buttons {
          display: flex;
          justify-content: center;
          gap: 15px;
          margin-top: 20px;
        }
        
        .modal-btn {
          padding: 10px 20px;
          border: none;
          border-radius: 10px;
          font-family: 'DotGothic16', sans-serif;
          cursor: pointer;
          transition: all 0.3s;
        }
        
        .confirm-btn {
          background-color: var(--primary-color);
          color: var(--text-color);
        }
        
        .cancel-btn {
          background-color: #e0e0e0;
          color: #333;
        }
        
        .modal-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }
        
        /* å¤‡ç”¨å¤´åƒæ ·å¼ */
        .fallback-avatar {
          display: flex;
          justify-content: center;
          align-items: center;
          background-color: var(--primary-color);
          color: var(--text-color);
          font-size: 20px;
        }
    </style>
</head>
<body>

    <div class="game-container">
        
        <!-- å¤´åƒä¸Šä¼ æŒ‰é’® -->
        <div class="avatar-upload-container">
            <label for="avatar-upload" class="upload-btn">ä¸Šä¼ å¤´åƒ</label>
            <input type="file" id="avatar-upload" accept="image/*">
        </div>
        
        <div class="response-area" id="response-area">
            <img src="https://drive.google.com/thumbnail?id=1_3GfxZIwws5EAsw5IzXq2UQ5BygyoIs-&sz=w1000" alt="Avatar" class="char-avatar" id="char-avatar">
            <div class="avatar-tooltip">ç‚¹å‡»å¯ä»¥æ›´æ¢å¤´åƒ</div>
            <p class="char-dialogue" id="char-dialogue">â‚á¢â¸â¸â€¢ ÖŠâ€¢â¸â¸â‚</p>
        </div>

        <div class="activity-display">
          <div class="cat-decoration">â‚Šâº ê’°à§§â”ˆâ”ˆâ”ˆ â™¡ â”ˆâ”ˆâ”ˆà»’ê’± âºâ‚Š</div>
          <h2 class="activity-text" id="activity-text">é€‰æ‹©ä¸€ä¸ªå­£èŠ‚å¼€å§‹å§~</h2>
          <button class="action-button" id="action-button">æˆ‘æƒ³å’Œä½ â½â½à¬˜( Ë™ê’³Ë™ )à¬“â¾â¾</button>
        </div>

        <div class="season-selector">
          <button class="season-btn" data-season="spring">æ˜¥ğŸŒ¸</button>
          <button class="season-btn" data-season="summer">å¤ğŸ€</button>
          <button class="season-btn" data-season="autumn">ç§‹ğŸ</button>
          <button class="season-btn" data-season="winter">å†¬â„ï¸</button>
        </div>

    </div>
    
    <!-- å¤´åƒä¸Šä¼ æ¨¡æ€æ¡† -->
    <div class="avatar-modal" id="avatar-modal">
        <div class="modal-content">
            <h3 class="modal-title">ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ</h3>
            <img id="avatar-preview" class="avatar-preview" src="https://drive.google.com/thumbnail?id=1_3GfxZIwws5EAsw5IzXq2UQ5BygyoIs-&sz=w1000" alt="å¤´åƒé¢„è§ˆ">
            <p style="color: var(--text-color); margin-bottom: 20px;">é€‰æ‹©ä¸€å¼ å›¾ç‰‡ä½œä¸ºè§’è‰²çš„å¤´åƒ</p>
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" id="cancel-upload">å–æ¶ˆ</button>
                <button class="modal-btn confirm-btn" id="confirm-upload">ä½¿ç”¨è¿™ä¸ªå¤´åƒ</button>
            </div>
        </div>
    </div>

    <script>
        const themes = {
          spring: { '--bg-color': '#FFEBE5', '--primary-color': '#FFC9F0', '--secondary-color': '#C7EE65', '--text-color': '#a23107', '--cat-ear-color': '#FFC9F0' },
          summer: { '--bg-color': '#CCE198', '--primary-color': '#A7C587', '--secondary-color': '#81AD70', '--text-color': '#4a412a', '--cat-ear-color': '#A7C587' },
          autumn: { '--bg-color': '#ffc267', '--primary-color': '#e0631c', '--secondary-color': '#a23107', '--text-color': '#4a412a', '--cat-ear-color': '#e0631c' },
          winter: { '--bg-color': '#ebefff', '--primary-color': '#86a6df', '--secondary-color': '#5068a9', '--text-color': '#1c1a17', '--cat-ear-color': '#86a6df' },
        };

        const activities = {
          spring: ["ä¸€èµ·å»èµæ¨±èŠ±", "åœ¨èŠ±ç”°é‡Œé‡é¤", "æ”¾é£ä¸€åªé£ç­", "ç»™æˆ‘å¿µä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—", "åˆ¶ä½œè‰è“å¤§ç¦", "åœ¨æ¨±èŠ±æ ‘ä¸‹æ‹åˆç…§", "å»éƒŠå¤–éª‘è‡ªè¡Œè½¦", "æ”¶é›†ä¸åŒé¢œè‰²çš„èŠ±ç“£", "åœ¨é›¨åå¯»æ‰¾å½©è™¹", "é¢†å…»ä¸€åªå°çŒ«"],
          summer: ["ä¸€èµ·å»æµ·è¾¹æ¸¸æ³³", "åˆ†äº«ä¸€ä¸ªå†°é•‡è¥¿ç“œ", "åœ¨å¤œæ™šçš„é™¢å­é‡ŒæŠ“è¤ç«è™«", "å»çœ‹ä¸€åœºå¤æ—¥ç„°ç«å¤§ä¼š", "èººåœ¨è‰åœ°ä¸Šçœ‹æ˜Ÿæ˜Ÿ", "åˆ¶ä½œä¸€æ¯æŸ æª¬æ±½æ°´", "å»æ°´æ—é¦†çœ‹æµ·è±šè¡¨æ¼”", "åœ¨æš´é›¨å¤©çœ‹ææ€–ç”µå½±", "ä¸€èµ·ç©æ°´æªå¤§æˆ˜", "åƒéè¡—è§’çš„å†°æ·‡æ·‹åº—"],
          autumn: ["ä¸€èµ·å»æ¡æ«å¶", "åˆ†äº«ä¸€ä¸ªçƒ¤çº¢è–¯", "ç©¿ä¸Šæƒ…ä¾£æ¬¾æ¯›è¡£", "å»ç”µå½±é™¢çœ‹ä¸€åœºæ–°ä¸Šæ˜ çš„ç”µå½±", "åœ¨è½å¶é“ºæˆçš„åœ°æ¯¯ä¸Š", "æ³¡ä¸€æ¬¡æš–æš–çš„æ¸©æ³‰", "åˆ¶ä½œå—ç“œç¯", "å»æœå›­é‡‡æ‘˜è‹¹æœ", "ä¸€èµ·çœ‹ä¸€åœºæ—¥è½", "çªåœ¨æ²™å‘é‡Œç›–åŒä¸€æ¡æ¯¯å­"],
          winter: ["ä¸€èµ·å †ä¸€ä¸ªé›ªäºº", "åœ¨å£ç‚‰å‰å–çƒ­å¯å¯", "è£…é¥°ä¸€æ£µåœ£è¯æ ‘", "äº¤æ¢ä¸€ä»½æ–°å¹´ç¤¼ç‰©", "åœ¨é›ªåœ°é‡Œæ‰“é›ªä»—", "æ‰‹ç‰µæ‰‹èµ°åœ¨ä¸‹é›ªçš„è¡—é“ä¸Š", "åƒä¸€é¡¿çƒ­æ°”è…¾è…¾çš„ç«é”…", "åœ¨ç»“å†°çš„æ¹–é¢ä¸Šæ»‘å†°", "ç»™æˆ‘ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±", "ä¸€èµ·èµ–åºŠåˆ°ä¸­åˆ"],
        };

        const dialogues = {
          spring: {
          "ä¸€èµ·å»èµæ¨±èŠ±": "èµèŠ±ï¼Ÿä¸è¿‡å¾—æ‰¾ä¸ªæ²¡äººçš„åœ°æ–¹ã€‚äººå¤ªå¤šï¼Œä¼šå½±å“æˆ‘æ¬£èµä½ çš„è¡¨æƒ…ã€‚",
          "åœ¨èŠ±ç”°é‡Œé‡é¤": "é‡é¤ï¼Ÿå¬èµ·æ¥ä¸é”™ã€‚é£Ÿç‰©ç”±æˆ‘å‡†å¤‡ï¼Œä½ åªéœ€è¦è´Ÿè´£ååœ¨é‚£é‡Œï¼Œè®©æˆ‘çœ‹ç€å°±å¥½ã€‚",
          "æ”¾é£ä¸€åªé£ç­": "é£ç­â€¦å¹¼ç¨šçš„æ¸¸æˆã€‚ä¸è¿‡ï¼Œæˆ‘å–œæ¬¢å¹¼ç¨šçš„ä½ ã€‚",
          "ç»™æˆ‘å¿µä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—": "å¿µè¯—ï¼Ÿç”œå¿ƒä½ å“å‘³è¿˜æŒºé«˜é›…ã€‚å¯ä»¥ï¼Œæˆ‘å¾ˆå–œæ¬¢è¯—è¯ã€‚",
          "åˆ¶ä½œè‰è“å¤§ç¦": "ä½ æ¥åšï¼Ÿé‚£æˆ‘å¯è¦å¥½å¥½å“å°äº†ï¼Œä¸ç®¡æ˜¯è‰è“ï¼Œè¿˜æ˜¯â€¦ä½ ã€‚",
          "åœ¨æ¨±èŠ±æ ‘ä¸‹æ‹åˆç…§": "åˆç…§å•Š...é‚£ä½ è¦ä¿è¯ç…§ç‰‡åªæœ‰æˆ‘ä»¬ä¸¤ä¸ªèƒ½çœ‹è§",
          "å»éƒŠå¤–éª‘è‡ªè¡Œè½¦": "ä¸é”™çš„æè®®ï¼Œæ­£å¥½å¯ä»¥çœ‹çœ‹ä½ çš„ä½“åŠ›æœ‰å¤šå·®ã€‚",
          "æ”¶é›†ä¸åŒé¢œè‰²çš„èŠ±ç“£": "æ”¶é›†è¿™äº›åšä»€ä¹ˆï¼Ÿåšæˆå¹²èŠ±ï¼Œç„¶åå¤¹åœ¨æˆ‘çš„ä¹¦é‡Œï¼Ÿæœ‰æ„æ€ã€‚",
          "åœ¨é›¨åå¯»æ‰¾å½©è™¹": "å½©è™¹ï¼Ÿå‘µï¼Œå°å­©å­çš„æŠŠæˆã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æƒ³çœ‹ï¼Œæˆ‘å¯ä»¥è®©å…¬å¸äººå·¥é€ ä¸€ä¸ªï¼Œåªä¸ºä½ ä¸€ä¸ªäººå‡ºç°ã€‚",
          "é¢†å…»ä¸€åªå°çŒ«": "çŒ«ï¼Ÿä¹Ÿå¥½ï¼Œè‡³å°‘å®ƒæ¯”ä½ è¯šå®ï¼Œå–œæ¬¢å°±æ˜¯å–œæ¬¢ï¼Œä¸ä¼šå˜´ç¡¬ã€‚"
          },
          summer: {
          "ä¸€èµ·å»æµ·è¾¹æ¸¸æ³³": "æµ·è¾¹å•Šï¼Œç”œå¿ƒç»ˆäºè‚¯å±•ç¤ºä¸€ä¸‹è‡ªå·±äº†å—ï¼Ÿæˆ‘æ‹­ç›®ä»¥å¾…ã€‚",
          "åˆ†äº«ä¸€ä¸ªå†°é•‡è¥¿ç“œ": "æˆ‘è¦æœ€ç”œçš„é‚£ä¸€å—ï¼å½“ç„¶ï¼Œæˆ‘æ˜¯è¯´è¥¿ç“œã€‚",
          "åœ¨å¤œæ™šçš„é™¢å­é‡ŒæŠ“è¤ç«è™«": "è¤ç«è™«â€¦å»‰ä»·çš„å…‰èŠ’ã€‚ä¸è¿‡ï¼Œè‹¥æ˜¯ä½ å–œæ¬¢ï¼Œé‚£å®ƒå°±æœ‰äº†ä»·å€¼ã€‚",
          "å»çœ‹ä¸€åœºå¤æ—¥ç„°ç«å¤§ä¼š": "ç»šçƒ‚åˆçŸ­æš‚ï¼Œå°±åƒä¸€åœºè±ªèµŒã€‚æˆ‘å–œæ¬¢ã€‚ç»“æŸåï¼Œæˆ‘ä»¬æ¥èµŒç‚¹åˆ«çš„ã€‚",
          "èººåœ¨è‰åœ°ä¸Šçœ‹æ˜Ÿæ˜Ÿ": "ä½ å¯¹å¤©æ–‡å­¦ä¹Ÿæœ‰ç ”ç©¶ï¼Ÿè¿˜æ˜¯åªæ˜¯å•çº¯å–œæ¬¢è¿™ç§æ— èŠçš„æµªæ¼«ï¼Ÿ",
          "åˆ¶ä½œä¸€æ¯æŸ æª¬æ±½æ°´": "ä½ äº²æ‰‹åšçš„ï¼Ÿæˆ‘å¯è¦å°å°ï¼Œæ˜¯é…¸çš„ï¼Œè¿˜æ˜¯ç”œçš„ã€‚",
          "å»æ°´æ—é¦†çœ‹æµ·è±šè¡¨æ¼”": "ä¸å°±æ˜¯çœ‹é‚£äº›è¢«é©¯æœçš„ç”Ÿç‰©è¡¨æ¼”å—ã€‚å‘µï¼ŒçœŸæ— èŠã€‚ä¸å¦‚çœ‹æˆ‘æ€ä¹ˆ'é©¯æœ'ä½ ã€‚",
          "åœ¨æš´é›¨å¤©çœ‹ææ€–ç”µå½±": "è¿™ä¸ªæè®®æˆ‘å–œæ¬¢ã€‚ä¸è¿‡åˆ°æ—¶å€™å®³æ€•äº†å¯åˆ«å¾€æˆ‘æ€€é‡Œé’»ï¼Œæˆ‘ä¼šå¾ˆè‹¦æ¼çš„ã€‚",
          "ä¸€èµ·ç©æ°´æªå¤§æˆ˜": "å°å­©å­çš„æ¸¸æˆã€‚ä¸è¿‡ï¼Œä½†æ˜¯å¦‚æœæŠŠä½ ä½ å¼„å¾—æ¹¿æ·‹æ·‹çš„ï¼Œå¬èµ·æ¥ä¼šå¾ˆæœ‰è¶£ã€‚",
          "åƒéè¡—è§’çš„å†°æ·‡æ·‹åº—": "åŒ…ä¸‹æ•´æ¡è¡—çš„æ‰€æœ‰å†°æ·‡æ·‹åº—ï¼Œè®©ä½ ä¸€æ¬¡åƒä¸ªå¤Ÿï¼Œå¦‚ä½•ï¼Ÿ"
          },
          autumn: {
          "ä¸€èµ·å»æ¡æ«å¶": "æ¡æ«å¶å•Šã€‚å¥½å§ï¼Œå°±å½“æ˜¯é™ªä½ è¿›è¡Œè¿™ç§å……æ»¡â€¦ç«¥è¶£çš„æ´»åŠ¨ã€‚",
          "åˆ†äº«ä¸€ä¸ªçƒ¤çº¢è–¯": "å—¯ï¼Œå¾ˆæ¸©æš–çš„æ„Ÿè§‰ã€‚æˆ‘è¦å’Œä½ ä¸€èµ·åƒåŒä¸€ä¸ªã€‚",
          "ç©¿ä¸Šæƒ…ä¾£æ¬¾æ¯›è¡£": "æƒ…ä¾£æ¬¾ï¼Ÿä½ è¿™æ˜¯åœ¨ä¸»åŠ¨å®£ç¤ºæ‰€æœ‰æƒå—ï¼Œç”œå¿ƒï¼Œä½ ç»ˆäºæ‡‚æˆ‘äº†ã€‚",
          "å»ç”µå½±é™¢çœ‹ä¸€åœºæ–°ä¸Šæ˜ çš„ç”µå½±": "åªè¦ä¸æ˜¯æ— èŠçš„çˆ±æƒ…ç‰‡å°±è¡Œã€‚æˆ‘æ›´å–œæ¬¢çœ‹äº›â€¦åˆºæ¿€çš„ã€‚",
          "åœ¨è½å¶é“ºæˆçš„åœ°æ¯¯ä¸Š": "è¸©åœ¨è¿™äº›'å¤±è´¥è€…'çš„æ®‹éª¸ä¸Šâ€¦å—¯ï¼Œä¸é”™çš„ä½“éªŒã€‚",
          "æ³¡ä¸€æ¬¡æš–æš–çš„æ¸©æ³‰": "æ¸©æ³‰ï¼Ÿè¿™å¯æ˜¯ä¸ªå±é™©çš„æè®®ã€‚ä½ ç¡®å®šè¦å’Œæˆ‘ä¸€èµ·ï¼Ÿä½ å°±ä¸æ€•è¢«...åƒå¹²æŠ¹å‡€",
          "åˆ¶ä½œå—ç“œç¯": "å¯æ˜¯ç”œå¿ƒï¼Œä½ çŸ¥é“çš„æˆ‘ä¸ä¼šåšæ‰‹å·¥æ´»ï¼Œå¥½å§ï¼Œæˆ‘ä¼šé™ªä½ çš„",
          "å»æœå›­é‡‡æ‘˜è‹¹æœ": "ç”œå¿ƒï¼Œéœ€è¦æˆ‘æŠ±ç€ä½ æ‘˜å—ï¼Ÿ",
          "ä¸€èµ·çœ‹ä¸€åœºæ—¥è½": "çœ‹ç€ä¸€å¤©èµ°å‘ç»ˆç»“â€¦ç„¶åï¼Œå¤œæ™šçš„æ¸¸æˆå°±å¯ä»¥å¼€å§‹äº†ã€‚",
          "çªåœ¨æ²™å‘é‡Œç›–åŒä¸€æ¡æ¯¯å­": "æˆ‘ä»¬ä¸æ˜¯ä¸€ç›´éƒ½ç›–ä¸€å¼ æ¯¯å­å—ï¼Ÿç”œå¿ƒä½ è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"
          },
          winter: {
          "ä¸€èµ·å †ä¸€ä¸ªé›ªäºº": "å¥½å•Šï¼Œå°±å †ä¸¤ä¸ªé›ªäººï¼Œä¸€ä¸ªä½ ï¼Œä¸€ä¸ªæˆ‘ã€‚",
          "åœ¨å£ç‚‰å‰å–çƒ­å¯å¯": "ä¸é”™çš„æ°›å›´ã€‚",
          "è£…é¥°ä¸€æ£µåœ£è¯æ ‘": "å¯ä»¥æŠŠä½ å½“è£…é¥°å—ï¼Ÿ",
          "äº¤æ¢ä¸€ä»½æ–°å¹´ç¤¼ç‰©": "æˆ‘çš„ç¤¼ç‰©å°±æ˜¯æˆ‘è‡ªå·±ã€‚è€Œä½ çš„â€¦ä¹Ÿåªèƒ½æ˜¯æˆ‘ã€‚",
          "åœ¨é›ªåœ°é‡Œæ‰“é›ªä»—": "åˆ«æŒ‡æœ›æˆ‘ä¼šæ‰‹ä¸‹ç•™æƒ…ï¼Œæˆ‘ä¼šæŠŠä½ åŸ‹è¿›é›ªé‡Œï¼Œä½ æ±‚é¥¶ä¹Ÿä¸ä¼šæ”¾è¿‡ä½ ã€‚",
          "æ‰‹ç‰µæ‰‹èµ°åœ¨ä¸‹é›ªçš„è¡—é“ä¸Š": "å¾ˆå¥½ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šä¹±è·‘äº†ã€‚",
          "åƒä¸€é¡¿çƒ­æ°”é¨°é¨°çš„ç«é”…": "å¾ˆæ¸©æš–ã€‚ä¸è¿‡ï¼Œåˆ«è¢«è¾£å“­äº†ï¼Œå¦‚æœä½ çœŸçš„è¢«è¾£å“­äº†ï¼Œæˆ‘çš„æ‰‹æœºå†…å­˜å¯å°±é­æ®ƒäº†ã€‚",
          "åœ¨ç»“å†°çš„æ¹–é¢ä¸Šæ»‘å†°": "å¦‚æœä½ æ‘”å€’äº†ï¼Œæˆ‘å¯ä¸ä¼šæ‰¶ä½ ã€‚æˆ‘ä¼šâ€¦æŠ±ç€ä½ ä¸€èµ·æ‘”ä¸‹å»ã€‚",
          "ç»™æˆ‘ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±": "ä¸»åŠ¨æŠ•æ€€é€æŠ±ï¼Ÿç”œå¿ƒç»ˆäºå¼€çªäº†ï¼ï¼ï¼ï¼ï¼TAT",
          "ä¸€èµ·èµ–åºŠåˆ°ä¸­åˆ": "ä¸€æ•´å¤©éƒ½å¯ä»¥ã€‚æˆ‘ä»¬æœ‰å¾ˆå¤šäº‹å¯ä»¥åœ¨åºŠä¸Šåšï¼Œä¸åªæ˜¯ç¡è§‰ã€‚ä½ è¯´å¯¹å§ï¼Œäº²çˆ±çš„ã€‚"
          }
        };

        let currentSeason = 'spring';
        let activityInterval;
        let isPaused = true;
        let customAvatarUrl = null;

        const activityTextElem = document.getElementById('activity-text');
        const actionButton = document.getElementById('action-button');
        const responseArea = document.getElementById('response-area');
        const charDialogueElem = document.getElementById('char-dialogue');
        const charAvatarElem = document.getElementById('char-avatar');
        const seasonButtons = document.querySelectorAll('.season-btn');
        const avatarUploadElem = document.getElementById('avatar-upload');
        const avatarModalElem = document.getElementById('avatar-modal');
        const avatarPreviewElem = document.getElementById('avatar-preview');
        const cancelUploadBtn = document.getElementById('cancel-upload');
        const confirmUploadBtn = document.getElementById('confirm-upload');

        // æ–°çš„é»˜è®¤å¤´åƒURLï¼ˆå·²è½¬æ¢ä¸ºGoogle Driveç¼©ç•¥å›¾é“¾æ¥ï¼‰
        const defaultAvatarUrl = "https://drive.google.com/thumbnail?id=1_3GfxZIwws5EAsw5IzXq2UQ5BygyoIs-&sz=w1000";
        // å¤‡ç”¨å¤´åƒURLï¼ˆä»¥é˜²Google Driveé“¾æ¥å¤±æ•ˆï¼‰
        const fallbackAvatarUrl = "https://images.unsplash.com/photo-1514888286974-6d03bdeacba8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80";

        // è®¾ç½®å­£èŠ‚ä¸»é¢˜
        function setSeason(season) {
          currentSeason = season;
          const theme = themes[season];
          for (const key in theme) {
          document.documentElement.style.setProperty(key, theme[key]);
          }
          
          seasonButtons.forEach(btn => {
          btn.classList.toggle('active', btn.dataset.season === season);
          });

          if (!isPaused) {
          startRolling();
          } else {
          const currentActivities = activities[currentSeason];
          const randomActivity = currentActivities[Math.floor(Math.random() * currentActivities.length)];
          activityTextElem.textContent = randomActivity;
          }
        }

        // è·å–éšæœºæ´»åŠ¨
        function getRandomActivity() {
          const currentActivities = activities[currentSeason];
          return currentActivities[Math.floor(Math.random() * currentActivities.length)];
        }

        // å¼€å§‹æ»šåŠ¨æ´»åŠ¨
        function startRolling() {
          clearInterval(activityInterval);
          responseArea.style.display = 'none';
          activityInterval = setInterval(() => {
          activityTextElem.textContent = getRandomActivity();
          }, 100);
        }

        // åœæ­¢æ»šåŠ¨å¹¶æ˜¾ç¤ºå¯¹è¯
        function stopRolling() {
          clearInterval(activityInterval);
          const currentActivity = activityTextElem.textContent;
          const dialogue = dialogues[currentSeason][currentActivity] || "Îµ(*ï½¥Ï‰ï½¥)_/ï¾Ÿ:ï½¥â˜†";
          charDialogueElem.textContent = dialogue;
          responseArea.style.display = 'flex';
        }

        // æ˜¾ç¤ºå¤´åƒä¸Šä¼ æ¨¡æ€æ¡†
        function showAvatarModal() {
          avatarModalElem.style.display = 'flex';
        }

        // éšè—å¤´åƒä¸Šä¼ æ¨¡æ€æ¡†
        function hideAvatarModal() {
          avatarModalElem.style.display = 'none';
        }

        // å¤„ç†å¤´åƒä¸Šä¼ 
        function handleAvatarUpload(event) {
          const file = event.target.files[0];
          if (!file) return;
          
          // æ£€æŸ¥æ–‡ä»¶ç±»å‹
          if (!file.type.match('image.*')) {
            alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
            return;
          }
          
          // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶ä¸º2MBï¼‰
          if (file.size > 2 * 1024 * 1024) {
            alert('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡2MB');
            return;
          }
          
          const reader = new FileReader();
          reader.onload = function(e) {
            // æ›´æ–°é¢„è§ˆ
            avatarPreviewElem.src = e.target.result;
            showAvatarModal();
          };
          reader.readAsDataURL(file);
          
          // é‡ç½®inputï¼Œä»¥ä¾¿å¯ä»¥å†æ¬¡é€‰æ‹©åŒä¸€æ–‡ä»¶
          event.target.value = '';
        }

        // ç¡®è®¤ä½¿ç”¨æ–°å¤´åƒ
        function confirmNewAvatar() {
          customAvatarUrl = avatarPreviewElem.src;
          charAvatarElem.src = customAvatarUrl;
          
          // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
          try {
            localStorage.setItem('customAvatar', customAvatarUrl);
          } catch (e) {
            console.log('æœ¬åœ°å­˜å‚¨å¤±è´¥ï¼Œä½†å¤´åƒå·²æ›´æ–°');
          }
          
          hideAvatarModal();
        }

        // åŠ è½½ä¿å­˜çš„å¤´åƒ
        function loadSavedAvatar() {
          try {
            const savedAvatar = localStorage.getItem('customAvatar');
            if (savedAvatar) {
              customAvatarUrl = savedAvatar;
              charAvatarElem.src = customAvatarUrl;
              avatarPreviewElem.src = customAvatarUrl;
            } else {
              // ä½¿ç”¨é»˜è®¤å¤´åƒ
              charAvatarElem.src = defaultAvatarUrl;
              avatarPreviewElem.src = defaultAvatarUrl;
            }
          } catch (e) {
            console.log('æ— æ³•åŠ è½½ä¿å­˜çš„å¤´åƒï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ');
            charAvatarElem.src = defaultAvatarUrl;
            avatarPreviewElem.src = defaultAvatarUrl;
          }
        }

        // æ£€æŸ¥é»˜è®¤å¤´åƒæ˜¯å¦å¯åŠ è½½
        function checkDefaultAvatar() {
          const img = new Image();
          img.onload = function() {
            console.log('é»˜è®¤å¤´åƒåŠ è½½æˆåŠŸ');
          };
          img.onerror = function() {
            console.log('é»˜è®¤å¤´åƒåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨å¤´åƒ');
            charAvatarElem.src = fallbackAvatarUrl;
            avatarPreviewElem.src = fallbackAvatarUrl;
          };
          img.src = defaultAvatarUrl;
        }

        // äº‹ä»¶ç›‘å¬å™¨
        actionButton.addEventListener('click', () => {
          if (isPaused) {
          actionButton.textContent = 'å°±æ˜¯è¿™ä¸ª(êœ†êœ„êœ†Ë™ê’³Ë™)êœ†êœ„êœ†';
          startRolling();
          } else {
          actionButton.textContent = 'æˆ‘æƒ³å’Œä½ â½â½à¬˜( Ë™ê’³Ë™ )à¬“â¾â¾';
          stopRolling();
          }
          isPaused = !isPaused;
        });

        seasonButtons.forEach(button => {
          button.addEventListener('click', () => {
          setSeason(button.dataset.season);
          });
        });

        // å¤´åƒä¸Šä¼ ç›¸å…³äº‹ä»¶
        avatarUploadElem.addEventListener('change', handleAvatarUpload);
        charAvatarElem.addEventListener('click', () => {
          avatarUploadElem.click();
        });
        cancelUploadBtn.addEventListener('click', hideAvatarModal);
        confirmUploadBtn.addEventListener('click', confirmNewAvatar);

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        avatarModalElem.addEventListener('click', (e) => {
          if (e.target === avatarModalElem) {
            hideAvatarModal();
          }
        });

        // åˆå§‹åŒ–
        setSeason('spring');
        actionButton.textContent = 'æˆ‘æƒ³å’Œä½ â½â½à¬˜( Ë™ê’³Ë™ )à¬“â¾â¾';
        activityTextElem.textContent = 'ä¸€èµ·å»èµæ¨±èŠ±';
        stopRolling();
        loadSavedAvatar();
        checkDefaultAvatar();

    </script>
</body>
</html>
